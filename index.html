<!DOCTYPE html>
<html>
  <head>
    <title>jsPaint getting bootstrapped</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="js/jquery-2.0.3.min.js"></script>

    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>

    <!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond)
    <script src="js/respond.js"></script> -->

    <!-- jsPaint -->
    <script type = "text/javascript" src = "js/canvasHandler.js"> </script>
    <script type = "text/javascript" src = "js/admin.js"></script>
    <script type = "text/javascript" src = "js/tool.js"></script>
    <link href="css/jsPaint.css" rel="stylesheet" media="screen">

  </head>
  <body>
    <div class="jsPaintContainer">
      <div class="row">
        <div class="col-lg-6 col-offset-3">
          <div class="panel panel-primary">
            <div class="panel-heading">
              <h3 class="panel-title">jsPaint</h3>
            </div>
            <div class="panel-body">
              <div class="btn-group">
                <button class="btn btn-info" onclick="makeNew();">new</button>
                <button class="btn btn-info" onclick="testDrawings();">test</button>
                <button class="btn btn-default" onclick="undoLast();" id="button_undo" disabled="1">undo</button>
              </div>
              <div class="btn-group">
                <button class="btn btn-success" onclick="useTool();">tool on</button>
                <button class="btn btn-danger" onclick="dontUseTool();">tool off</button>
              </div>
              <div id="aContainer"></div>
            </div>
            <div class="panel-footer">
                <button onclick="saveIt();" class="btn btn-success">save</button>
                <button onclick="localStorage.clear();listArtInOutput();" class="btn btn-warning">clear</button>
              <div class="btn-group dropup">
                <button class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
                  Storage <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" id="storage-dropdown"></ul>
              </div>
              <div id="adminOutput"></div>
            </div>
          </div>
          <!-- textarea id="textarea_as_store" cols="50" rows="4" readonly="1" class="well"></textarea -->
        </div> <!-- //col-lg-6 col-offset-3 -->
      </div> <!-- //row -->
    </div> <!-- //container -->

<!-- here comes the script! -->

  <script type="text/javascript">
    document.getElementById('adminOutput').innerHTML = listArtBtn();

    var myHandler = new CanvasHandler();
    myHandler.appendNewCanvas('aContainer', 'myCanvas', 200, 200);
    document.getElementById('adminOutput').innerHTML = listArtBtn();
    document.getElementById('storage-dropdown').innerHTML = listArtLi();

    function listArtInOutput () {
      document.getElementById('adminOutput').innerHTML = listArtBtn();
      document.getElementById('storage-dropdown').innerHTML = listArtLi();
    }

	function useTool(){
		var tool = new Tool();
		var content = myHandler.getContext('2d');

		document.getElementById('myCanvas').addEventListener('mousedown', function(event){
			tool.draw(event, content);
	    });

	    document.getElementById('myCanvas').addEventListener('mousemove', function(event){
			tool.draw(event, content);
	    });

		document.getElementById('myCanvas').addEventListener('touchmove', function(event){
			tool.draw(event, content);
	    });
    }


    function dontUseTool(){
      document.getElementById('myHandler').removeEventListener('mousedown');
      document.getElementById('myHandler').removeEventListener('mousemove');
    }
  </script>
  </body>
</html>