<!DOCTYPE html>
<head>
	<title>JavaScript Objekte</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<h1>JavaScript Kurs #018 - OOP - Beispiel Lösung Hausaufgabe</h1>

<script type="text/javascript">

 
function Fahrzeug(name) 
{	
	var _name = name;

	this.leseName = function() 
	{
		return _name;
	}
	
	this.beschleunigen = function()
	{
		console.log('Beschleunigung!');
	}
	
	this.bremsen = function()
	{
		console.log('Bremse wurde betätigt!');
	}
		
	this.hupen = function()
	{
		console.log('Hup!');
	}
}

function Kleinwagen(name)
{
	Fahrzeug.call(this, name);
}
Kleinwagen.prototype = new Fahrzeug();

function Sportwagen(name)
{
	Fahrzeug.call(this, name);	
	
	this.turboBoosterStarten = function()
	{
		console.log('Turbobooster gestartet!');
	} 
}
Sportwagen.prototype = new Fahrzeug();

function Traktor(name)
{
	Fahrzeug.call(this, name);
}
Traktor.prototype = new Fahrzeug();

function Autotransporter(name)
{
	Fahrzeug.call(this, name);
	
	var MAX_AUTOS = 6;
	var _autos = [];
	
	this.autoAufladen = function(auto)
	{
		if (_autos.length < MAX_AUTOS) {
			_autos.push(auto);

			console.log('Auto aufgeladen: ', auto.leseName());
		} else {
			console.log('Transporter ist voll. Zuerst entladen! Auto ' 
					+ auto.leseName() + ' kann nicht mehr aufgeladen werden');
		}
	}
	
	this.autoEntladen = function()
	{
		if (_autos.length > 0) {
			var entladenesAuto = _autos.pop();
			console.log('Auto entladen: ' + entladenesAuto.leseName() );
		} else {
			var entladenesAuto = null;
			console.log('Kein Auto mehr vorhanden. Transporter ist leer!');
		}
	
		return entladenesAuto;
	}
	
	this.anzahlAutos = function()
	{
		return _autos.length;
	}
	
	this.listeAutos = function() 
	{
		var liste = '';
		for(var i = 0; i < _autos.length; i++) {
			liste = liste + _autos[i].leseName();
			liste = liste + "\n";
		}
		
		return liste;
	}
}
Autotransporter.prototype = new Fahrzeug();

// Beispiel-Instanzen der verschiedenen Fahrzeuge
var kaefer = new Kleinwagen('kaefer');
var schlepper = new Traktor('Schlepper');
var deLorean = new Sportwagen('deLorean');

var opel = new Kleinwagen('Opel C-Kadett');
var panda = new Kleinwagen('Panda');
var mini = new Kleinwagen('Mini');
var smart = new Kleinwagen('Smart');
var porsche = new Sportwagen('Porsche 911');

var autotransporter = new Autotransporter('Transporter');

console.log('Test mit Fahrzeug: ', kaefer.leseName());
kaefer.beschleunigen();
kaefer.hupen();
kaefer.bremsen(); 

console.log('Test mit Fahrzeug: ', deLorean.leseName());
deLorean.turboBoosterStarten();

autotransporter.autoAufladen(kaefer);
autotransporter.autoAufladen(schlepper);
autotransporter.autoAufladen(deLorean);
autotransporter.autoAufladen(opel);
autotransporter.autoAufladen(panda);
autotransporter.autoAufladen(smart);
autotransporter.autoAufladen(porsche);

var entladen = autotransporter.autoEntladen();
console.log('Dieses Auto wurde gerade entladen: ' + entladen.leseName());

autotransporter.autoAufladen(porsche);

// Welche Autos sind nun alle aufgeladen?
console.log('Derzeit aufgeladene Autos: ' + autotransporter.listeAutos());

// alle Autos wieder entladen
while(autotransporter.anzahlAutos() > 0) {
	autotransporter.autoEntladen();
}

// testweise noch ein Auto entladen
autotransporter.autoEntladen();




</script>